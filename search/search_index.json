{
    "docs": [
        {
            "location": "/",
            "text": "XCache\n\n\nWhat is it?\n\n\nXCache is a service that provides caching of data accessed using \nxrootd protocol\n. It sits in between client and an upstream xrootd servers and can cache/prefetch full files or only blocks already requested. To use it to cache file that is at \n\nroot://origin.org:1094/my_file.txt\n\nsimply prepend name of the caching server:\n\nroot://caching_server.org:1094//root://origin.org:1094/my_file.txt\n  \n\nWhen deployed using kubernetes all relevant parameters are configured throught the container environment variables.\n\n\nLinks\n\n\n\n\nDocker\n\n\nGitHub\n\n\nDocumentation\n\n\nMonitoring\n\n\n\n\nConfiguration\n\n\nMandatory variables\n\n\n\n\n\n\n\n\nVariable\n\n\nMeaning\n\n\n\n\n\n\n\n\n\n\nSitename\n\n\nATLAS specific. Used in registering cache in AGIS and in all monitoring. Has to correspond to ATLAS sitename.\n\n\n\n\n\n\nCertificate\n\n\nTBD.\n\n\n\n\n\n\n\n\nOptional settings\n\n\n\n\n\n\n\n\nImplemented\n\n\nOption\n\n\nVariable\n\n\nDefault\n\n\nMeaning\n\n\n\n\n\n\n\n\n\n\nNo\n\n\nRucio N2N\n\n\nXC_RUCIO_N2N\n\n\nTrue\n\n\nThis is ATLAS specific thing. To avoid multiple cache copies of the same file (obtained from different sources) it will strip source specific part of the path.\n\n\n\n\n\n\nNo\n\n\nMonitoring\n\n\nXC_MONITORING\n\n\nTrue\n\n\nThis is xrootd internal monitoring info. Actual service status is monitored through the kubernetes infrastructure.\n\n\n\n\n\n\nYes\n\n\nPort\n\n\nXC_PORT\n\n\n1094\n\n\n\n\n\n\n\n\nNo\n\n\nSubfile caching\n\n\nSUBFC\n\n\nTrue\n\n\n\n\n\n\n\n\nYes\n\n\nPrefetching\n\n\nXC_PREFETCH\n\n\n0\n\n\n\n\n\n\n\n\nYes\n\n\nBlock size\n\n\nXC_BLOCKSIZE\n\n\n1M\n\n\n\n\n\n\n\n\nYes\n\n\nDisk usage high watermark\n\n\nXC_SPACE_HIGH_WM\n\n\n95%\n\n\n\n\n\n\n\n\nYes\n\n\nDisk usage low watermark\n\n\nXC_SPACE_LOW_WM\n\n\n80%\n\n\n\n\n\n\n\n\nYes\n\n\nRAM size\n\n\nXC_RAMSIZE\n\n\nhalf of the free RAM\n\n\nAt least 1g. Units are ...\n\n\n\n\n\n\n\n\nTo Do\n\n\n\n\nAdd sitename\n\n\nAdd RucioN2N\n\n\nAdd subfile caching option\n\n\nCreate pod reporting on cache status\n\n\nAdd summary stream monitoring\n\n\nTest\n\n\nCreate core collecting pod.\n\n\nCreate full deployment",
            "title": "Home"
        },
        {
            "location": "/#xcache",
            "text": "",
            "title": "XCache"
        },
        {
            "location": "/#what-is-it",
            "text": "XCache is a service that provides caching of data accessed using  xrootd protocol . It sits in between client and an upstream xrootd servers and can cache/prefetch full files or only blocks already requested. To use it to cache file that is at  root://origin.org:1094/my_file.txt \nsimply prepend name of the caching server: root://caching_server.org:1094//root://origin.org:1094/my_file.txt    \nWhen deployed using kubernetes all relevant parameters are configured throught the container environment variables.",
            "title": "What is it?"
        },
        {
            "location": "/#links",
            "text": "Docker  GitHub  Documentation  Monitoring",
            "title": "Links"
        },
        {
            "location": "/#configuration",
            "text": "",
            "title": "Configuration"
        },
        {
            "location": "/#mandatory-variables",
            "text": "Variable  Meaning      Sitename  ATLAS specific. Used in registering cache in AGIS and in all monitoring. Has to correspond to ATLAS sitename.    Certificate  TBD.",
            "title": "Mandatory variables"
        },
        {
            "location": "/#optional-settings",
            "text": "Implemented  Option  Variable  Default  Meaning      No  Rucio N2N  XC_RUCIO_N2N  True  This is ATLAS specific thing. To avoid multiple cache copies of the same file (obtained from different sources) it will strip source specific part of the path.    No  Monitoring  XC_MONITORING  True  This is xrootd internal monitoring info. Actual service status is monitored through the kubernetes infrastructure.    Yes  Port  XC_PORT  1094     No  Subfile caching  SUBFC  True     Yes  Prefetching  XC_PREFETCH  0     Yes  Block size  XC_BLOCKSIZE  1M     Yes  Disk usage high watermark  XC_SPACE_HIGH_WM  95%     Yes  Disk usage low watermark  XC_SPACE_LOW_WM  80%     Yes  RAM size  XC_RAMSIZE  half of the free RAM  At least 1g. Units are ...",
            "title": "Optional settings"
        },
        {
            "location": "/#to-do",
            "text": "Add sitename  Add RucioN2N  Add subfile caching option  Create pod reporting on cache status  Add summary stream monitoring  Test  Create core collecting pod.  Create full deployment",
            "title": "To Do"
        },
        {
            "location": "/instructions/",
            "text": "Instructions\n\n\nHow to build\n\n\ngit clone https://github.com/slateci/XCache.git\ncd Xcache\ndocker build --tag xcache:latest .\n\n\n\n\nHow to run\n\n\ndocker run -dt -v /tmp/data:/data -v /tmp/x509up_u`id -u`:/var/run/x509up \\\n  -v /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/etc/grid-security-emi/certificates:/etc/grid-security/certificates \\\n  --rm --net=host -e \"UIDGID=`id -u`:`id -g`\" xcache\n\n\nNote:\n1. UIDGID (in the form of uid:gid) is needed and will be used to run the xrootd process.\n2. A the disk space for cache is bind mounted to /data. It should be owned by \"uid\".\n3. To access ATLAS data sources, bind mount to /etc/grid-secrity/certificates is needed. Also\n   needed is a x509 proxy bind mounted to /var/run/x509up. It should be owned by \"uid\", have \n   ATLAS voms attributes and should be continously updated.\n\n\nTo stop\n\n\npkill xrootd",
            "title": "Instructions"
        },
        {
            "location": "/instructions/#instructions",
            "text": "",
            "title": "Instructions"
        },
        {
            "location": "/instructions/#how-to-build",
            "text": "git clone https://github.com/slateci/XCache.git\ncd Xcache\ndocker build --tag xcache:latest .",
            "title": "How to build"
        },
        {
            "location": "/instructions/#how-to-run",
            "text": "docker run -dt -v /tmp/data:/data -v /tmp/x509up_u`id -u`:/var/run/x509up \\\n  -v /cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase/etc/grid-security-emi/certificates:/etc/grid-security/certificates \\\n  --rm --net=host -e \"UIDGID=`id -u`:`id -g`\" xcache  Note:\n1. UIDGID (in the form of uid:gid) is needed and will be used to run the xrootd process.\n2. A the disk space for cache is bind mounted to /data. It should be owned by \"uid\".\n3. To access ATLAS data sources, bind mount to /etc/grid-secrity/certificates is needed. Also\n   needed is a x509 proxy bind mounted to /var/run/x509up. It should be owned by \"uid\", have \n   ATLAS voms attributes and should be continously updated.",
            "title": "How to run"
        },
        {
            "location": "/instructions/#to-stop",
            "text": "pkill xrootd",
            "title": "To stop"
        },
        {
            "location": "/about/",
            "text": "XCache docs v.01\n\n\nIlija Vukotic (ivukotic@cern.ch)",
            "title": "About"
        },
        {
            "location": "/about/#xcache-docs-v01",
            "text": "Ilija Vukotic (ivukotic@cern.ch)",
            "title": "XCache docs v.01"
        }
    ]
}